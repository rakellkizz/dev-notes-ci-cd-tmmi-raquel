name: Gerar PDF Profissional

on:
  push:
    branches: ["main"]
  workflow_dispatch:

jobs:
  build-pdf:
    runs-on: ubuntu-latest

    container:
      image: pandoc/latex:latest

    steps:
      - name: Checkout do repositório
        uses: actions/checkout@v4

      - name: Criar pasta docs/
        run: mkdir -p docs

      - name: Baixar template Eisvogel
        run: |
          apt-get update && apt-get install -y wget
          wget -O eisvogel.latex https://github.com/Wandmalfarbe/pandoc-latex-template/raw/master/eisvogel.tex

      - name: Gerar PDF profissional com capa
        run: |
          pandoc \
            README.md \
            ci-cd/*.md \
            pipeline/*.md \
            tmmi/tmmi/*.md \
            linguagens/*.md \
            go/*.md \
            melhoria-continua/*.md \
            testes-qa/*.md \
            entrevistas/*.md \
            --from markdown \
            --pdf-engine=xelatex \
            --template=eisvogel.latex \
            --toc \
            -V title="Dev Notes – CI/CD, Pipelines & TMMi" \
            -V subtitle="Estudos, práticas e fundamentos para equipes de Engenharia & QA" \
            -V author="Raquel G. de Souza" \
            -V date="\\today" \
            -V titlepage=true \
            -V titlepage-color="FFFFFF" \
            -V titlepage-text-color="000000" \
            -V titlepage-rule-color="000000" \
            -V titlepage-rule-height=2 \
            -o docs/dev-notes-raquel.pdf

      - name: Upload do PDF como artefato
        uses: actions/upload-artifact@v4
        with:
          name: dev-notes-pdf
          path: docs/dev-notes-raquel.pdf
